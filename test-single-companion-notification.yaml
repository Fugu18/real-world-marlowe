ptTestName: Test companion app notifies about new contract

ptPabOperations:
  - tag: CreateWallet
    poOwner: Sender

  - tag: CreateWallet
    poOwner: Receiver

  - tag: FundWallet
    poOwner: Sender
    poValue:
      lovelace: 80000000

  - tag: ActivateCompanion
    poOwner: Receiver
    poInstance: Receiver

  - tag: AwaitCompanion
    poInstance: Receiver
    poResponsePattern:
      parts: []

  - tag: ActivateApp
    poOwner: Sender
    poInstance: Sender

  - tag: CallCreate
    poInstance: Sender
    poOwners:
      - Receiver
      - Sender
    poContract:
      when:
        - case:
            party:
              role_token: Sender
            deposits: 8000000
            into_account:
              role_token: Receiver
            of_token:
              currency_symbol: ""
              token_name: ""
          then:
            pay: 8000000
            token:
              currency_symbol: ""
              token_name: ""
            from_account:
              role_token: Receiver
            to:
              party:
                role_token: Receiver
            then: close
        # We want to have to parties in a contract but have
        # a way quickly finish it up as well
        - case:
            notify_if: true
          then: close
      timeout: 1929587625000
      timeout_continuation: close

  - tag: AwaitCreate
    poInstance: Sender

  - tag: CallApplyInputs
    poInstance: Sender
    poInputs:
      - input_notify
    poTimes:
      - 1645590825000
      - 1898051625000

  - tag: AwaitApplyInputs
    poInstance: Sender

  - tag: AwaitCompanion
    poInstance: Receiver
    poResponsePattern:
      parts: []
