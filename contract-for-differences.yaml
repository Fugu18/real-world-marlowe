timeout: 12
timeout_continuation: close
when:
- case:
    deposits: 20000000
    into_account:
      role_token: Party
    of_token:
      currency_symbol: ''
      token_name: ''
    party:
      role_token: Party
  then:
    timeout: 13
    timeout_continuation: close
    when:
    - case:
        deposits: 30000000
        into_account:
          role_token: Counterparty
        of_token:
          currency_symbol: ''
          token_name: ''
        party:
          role_token: Counterparty
      then:
        timeout: 14
        timeout_continuation:
          timeout: 15
          timeout_continuation: close
          when:
          - case:
              choose_between:
              - from: 0
                to: 1000000000
              for_choice:
                choice_name: Price in first window
                choice_owner:
                  role_token: Oracle
            then:
              timeout: 16
              timeout_continuation:
                timeout: 17
                timeout_continuation: close
                when:
                - case:
                    choose_between:
                    - from: 0
                      to: 1000000000
                    for_choice:
                      choice_name: Price in second window
                      choice_owner:
                        role_token: Oracle
                  then:
                    else:
                      else: close
                      if:
                        lt:
                          value_of_choice:
                            choice_name: Price in second window
                            choice_owner:
                              role_token: Oracle
                        value:
                          value_of_choice:
                            choice_name: Price in first window
                            choice_owner:
                              role_token: Oracle
                      then:
                        be:
                          minus:
                            value_of_choice:
                              choice_name: Price in first window
                              choice_owner:
                                role_token: Oracle
                          value:
                            value_of_choice:
                              choice_name: Price in second window
                              choice_owner:
                                role_token: Oracle
                        let: Increase in price
                        then:
                          from_account:
                            role_token: Party
                          pay:
                            else: 20000000
                            if:
                              lt: 20000000
                              value:
                                use_value: Increase in price
                            then:
                              use_value: Increase in price
                          then: close
                          to:
                            account:
                              role_token: Counterparty
                          token:
                            currency_symbol: ''
                            token_name: ''
                    if:
                      gt:
                        value_of_choice:
                          choice_name: Price in second window
                          choice_owner:
                            role_token: Oracle
                      value:
                        value_of_choice:
                          choice_name: Price in first window
                          choice_owner:
                            role_token: Oracle
                    then:
                      be:
                        minus:
                          value_of_choice:
                            choice_name: Price in second window
                            choice_owner:
                              role_token: Oracle
                        value:
                          value_of_choice:
                            choice_name: Price in first window
                            choice_owner:
                              role_token: Oracle
                      let: Decrease in price
                      then:
                        from_account:
                          role_token: Counterparty
                        pay:
                          else: 30000000
                          if:
                            lt: 30000000
                            value:
                              use_value: Decrease in price
                          then:
                            use_value: Decrease in price
                        then: close
                        to:
                          account:
                            role_token: Party
                        token:
                          currency_symbol: ''
                          token_name: ''
              when: []
        when: []
