
***** Test "Zero-Coupon Bond" *****
[Comment] Create the wallet for the lender, fund it with 80 ADA, and activate the Marlowe endpoints.
[CreateWallet] Created wallet 815efce3cf8f49ff2959edb657d27830c98f7b34 for role "Lender".
[FundWallet] Funded wallet 815efce3cf8f49ff2959edb657d27830c98f7b34 for role "Lender" with valueFromList [(AdaAssetId,80000000)].
[ActivateApp] Activated MarloweApp instance 6f436deb-ff29-4361-9cdf-9391a1874615 for role "Lender".
[Comment] Create the wallet for the borrower and fund it with 10 ADA, and activate the Marlowe endpoints.
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewObservableState Null.
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewYieldedExportTxs [].
[CreateWallet] Created wallet 049017835a36683e142f1ab3c42e588c7e579598 for role "Borrower".
[FundWallet] Funded wallet 049017835a36683e142f1ab3c42e588c7e579598 for role "Borrower" with valueFromList [(AdaAssetId,10000000)].
[ActivateApp] Activated MarloweApp instance 43d1e315-7c27-40be-814e-c3376d89d842 for role "Borrower".
[Comment] Show the contents of the wallets.
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewObservableState Null.
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewYieldedExportTxs [].
[PrintWallet] Wallet for role "Lender" contains valueFromList [(AdaAssetId,80000000)].
[PrintWallet] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,10000000)].
[Comment] The lender creates the ZCB contract, which was downloaded from Marlowe Playground. The loan amount is 50 ADA and the interest amount is 3 ADA.
[CallCreate] Endpoint "create" called on instance 6f436deb-ff29-4361-9cdf-9391a1874615 for owners [("Lender",AddressInEra (ShelleyAddressInEra ShelleyBasedEraShelley) (ShelleyAddress Testnet (KeyHashObj (KeyHash "9d6eaa61333fcff6a1c197848f78f81629dbc0ce5c63fba9ffb3c2c8")) (StakeRefBase (KeyHashObj (KeyHash "9686f891a5fad026ece8aaf2c1d7f931ff5f578ed36ab0c0da7dba6c"))))),("Borrower",AddressInEra (ShelleyAddressInEra ShelleyBasedEraShelley) (ShelleyAddress Testnet (KeyHashObj (KeyHash "4cb8dacda7572e4914989539ccabbd1942c77b626adcc5f28ff68004")) (StakeRefBase (KeyHashObj (KeyHash "4a8dd6598dbe58efd8561970a4feebb5cfe7483b5adbec46cc700cba")))))].
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [].
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewObservableState (Object (fromList [("contents",Array [String "89caf852-a7a4-4752-b33c-d9f8f814c8c0",Object (fromList [("contents",Object (fromList [("rolePayoutValidatorHash",String "8e723d90237c8c91e1578c2ab58fd3c8d2daa55a62c98361b3abb9e2"),("rolesCurrency",Object (fromList [("unCurrencySymbol",String "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db")]))])),("tag",String "CreateResponse")])]),("tag",String "EndpointSuccess")])).
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[AwaitCreate] Creation confirmed with MarloweParams {rolePayoutValidatorHash = 8e723d90237c8c91e1578c2ab58fd3c8d2daa55a62c98361b3abb9e2, rolesCurrency = 3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db}.
[Comment] The lender should have about 76 ADA now, since 2 ADA was sent to the script address when creating the contract, 2 ADA was sent the borrower along with the role token, and up to 1 ADA in fees might have been paid.
[CheckFunds] Wallet for role "Lender" contains valueFromList [(AdaAssetId,75509500),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Lender",1)].
[Comment] The borrower should now have their original 10 ADA plus the 2 ADA that arrived with the role token.
[CheckFunds] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,12000000),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Borrower",1)].
[Comment] The borrower needs to follow this contract in order to interact with it.
[Follow] Instance 43d1e315-7c27-40be-814e-c3376d89d842 now follows instance 6f436deb-ff29-4361-9cdf-9391a1874615.
[Comment] The lender deposits the 50 ADA loan amount.
[CallApplyInputs] Endpoint "apply-inputs" called on 6f436deb-ff29-4361-9cdf-9391a1874615 for inputs [ClientInput (IDeposit "Lender" "Lender" (Token "" "") 50000000)] and times Just (POSIXTime {getPOSIXTime = 1645590825000},POSIXTime {getPOSIXTime = 1898051625000}).
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [].
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewObservableState (Object (fromList [("contents",Array [String "884a39d2-876a-4e71-a2d4-2e88a07c28ce",Object (fromList [("tag",String "ApplyInputsResponse")])]),("tag",String "EndpointSuccess")])).
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[AwaitApplyInputs] Input application confirmed.
[Comment] The lender will have 50 ADA less for the loan and may have paid up to another 2 ADA in fees, leaving a balance of 26 ADA minus up to 3 ADA in fees.
[CheckFunds] Wallet for role "Lender" contains valueFromList [(AdaAssetId,24017591),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Lender",1)].
[Comment] The borrower's funds are unchanged.
[CheckFunds] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,12000000),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Borrower",1)].
[Comment] Now the borrower redeems the 50 ADA from the payout script.
[CallRedeem] Endpoint "redeem" called on 43d1e315-7c27-40be-814e-c3376d89d842 for role "Borrower".
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewActiveEndpoints [].
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewObservableState (Object (fromList [("contents",Array [String "c60700bf-abee-4c76-b46a-f56e56e5e5c7",Object (fromList [("tag",String "RedeemResponse")])]),("tag",String "EndpointSuccess")])).
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[AwaitRedeem] Redemption confirmed.
[Comment] The lender's funds are unchanged.
[CheckFunds] Wallet for role "Lender" contains valueFromList [(AdaAssetId,24017591),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Lender",1)].
[Comment] The borrower has an additional 50 ADA but may have paid up to 1 ADA in fees for the redemption, leaving a balance of 62 ADA minus up to 1 ADA in fees.
[CheckFunds] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,61557234),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Borrower",1)].
[Comment] The borrower pays back the 53 ADA of loan plus interest.
[CallApplyInputs] Endpoint "apply-inputs" called on 43d1e315-7c27-40be-814e-c3376d89d842 for inputs [ClientInput (IDeposit "Borrower" "Borrower" (Token "" "") 53000000)] and times Just (POSIXTime {getPOSIXTime = 1645590825000},POSIXTime {getPOSIXTime = 1898051625000}).
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewActiveEndpoints [].
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewObservableState (Object (fromList [("contents",Array [String "795d3967-bd69-45e4-921a-f71cf0e672da",Object (fromList [("tag",String "ApplyInputsResponse")])]),("tag",String "EndpointSuccess")])).
[runContract] Instance 43d1e315-7c27-40be-814e-c3376d89d842 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[AwaitApplyInputs] Input application confirmed.
[Comment] Because the contract is closed when the borrower makes their deposit, the lender receives back their 2 ADA that they contributed to create the contract.
[CheckFunds] Wallet for role "Lender" contains valueFromList [(AdaAssetId,26017591),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Lender",1)].
[Comment] The borrower has 53 ADA less and may have paid another 2 ADA in fees, leaving a balance of 9 ADA minus up to 3 ADA in fees.
[CheckFunds] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,7229678),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Borrower",1)].
[Comment] The lender redeems the 53 ADA.
[CallRedeem] Endpoint "redeem" called on 6f436deb-ff29-4361-9cdf-9391a1874615 for role "Lender".
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [].
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewObservableState (Object (fromList [("contents",Array [String "f6613f97-f6a6-4137-97c8-808c441c964d",Object (fromList [("tag",String "RedeemResponse")])]),("tag",String "EndpointSuccess")])).
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received NewActiveEndpoints [ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "close"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "redeem"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "auto"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs-nonmerkleized"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "apply-inputs"}, aeMetadata = Nothing},ActiveEndpoint {aeDescription = EndpointDescription {getEndpointDescription = "create"}, aeMetadata = Nothing}].
[AwaitRedeem] Redemption confirmed.
[Comment] The lender now has an additional 53 ADA but may have paid another 1 ADA in fees, leaving a balance of 81 ADA minus up to 4 ADA in fees.
[CheckFunds] Wallet for role "Lender" contains valueFromList [(AdaAssetId,78483015),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Lender",1)].
[Comment] The borrower's funds are unchanged.
[CheckFunds] Wallet for role "Borrower" contains valueFromList [(AdaAssetId,7229678),(AssetId "3de05f8ea63d96b8911c5713d64f3153156ee7ed80aa57de51a3d2db" "Borrower",1)].
[Comment] Return unused funds.
[ReturnFunds] Returned funds from wallet 815efce3cf8f49ff2959edb657d27830c98f7b34.
[ReturnFunds] Returned funds from wallet 049017835a36683e142f1ab3c42e588c7e579598.
[Comment] Stop the Marlowe application.
[runContract] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 received ContractFinished Nothing.
[Stop] Instance 6f436deb-ff29-4361-9cdf-9391a1874615 stopped.
[Stop] Instance 43d1e315-7c27-40be-814e-c3376d89d842 stopped.
***** SUCCEEDED *****
